# CyberPanel & CloudPanel Backup Monitoring to ZimaOS

Este repositÃ³rio contÃ©m scripts de monitorizaÃ§Ã£o de integridade para backups realizados em painÃ©is **CyberPanel** e **CloudPanel**, com foco no envio para armazenamento externo via SFTP (testado em **ZimaOS**).

## ğŸš€ Funcionalidades

- **MonitorizaÃ§Ã£o Inteligente**: O script verifica a existÃªncia fÃ­sica de ficheiros `.tar.gz` gerados nas Ãºltimas 24h.
- **AnÃ¡lise de Logs**: Filtra logs de sistema (`stderr.log` ou `journalctl`) para identificar falhas reais.
- **NotificaÃ§Ãµes via Telegram**: Envia relatÃ³rios formatados em HTML com estados:
  - ğŸŸ¢ **SAUDÃVEL**: Backup concluÃ­do e verificado.
  - ğŸ”´ **ERRO**: Falha detectada no processo de backup.
  - âšª **AGUARDANDO**: Nenhum backup detectado (ainda em processamento ou fora do horÃ¡rio).
- **Multi-Painel**: VersÃµes especÃ­ficas para a estrutura de pastas do CyberPanel e CloudPanel.

## ğŸ“¦ InstalaÃ§Ã£o

### 1. PreparaÃ§Ã£o
Cria um bot no Telegram atravÃ©s do [@BotFather](https://t.me/botfather) e obtÃ©m o teu `CHAT_ID`.

### 2. ConfiguraÃ§Ã£o no Servidor
Escolhe o script adequado ao teu painel e guarda-o em `/usr/local/bin/`.

**Para CyberPanel:**

```bash
wget [https://raw.githubusercontent.com/lucianomilani/cyberpanel-zimaos-backup/main/report_cyberpanel.sh](https://raw.githubusercontent.com/lucianomilani/cyberpanel-zimaos-backup/main/report_cyberpanel.sh) -O /usr/local/bin/report_cyberpanel.sh
chmod +x /usr/local/bin/report_cyberpanel.sh


**Para CloudPanel:**

```bash
wget [https://raw.githubusercontent.com/lucianomilani/cyberpanel-zimaos-backup/main/report_cloudpanel.sh](https://raw.githubusercontent.com/lucianomilani/cyberpanel-zimaos-backup/main/report_cloudpanel.sh) -O /usr/local/bin/report_cloudpanel.sh
chmod +x /usr/local/bin/report_cloudpanel.sh

3. Configurar VariÃ¡veis
Edita o script escolhido e insere as tuas credenciais:

TOKEN="O_TEU_BOT_TOKEN"
CHAT_ID="O_TEU_CHAT_ID"

â° Agendamento (Cron)
Para receber o relatÃ³rio todos os domingos Ã s 09:00, adiciona a seguinte linha ao teu crontab (crontab -e):

CyberPanel:

Fragmento do cÃ³digo

00 09 * * 0 /usr/local/bin/report_cyberpanel.sh > /dev/null 2>&1
CloudPanel:

Fragmento do cÃ³digo

00 09 * * 0 /usr/local/bin/report_cloudpanel.sh > /dev/null 2>&1

ğŸ› ï¸ IntegraÃ§Ã£o com ZimaOS
Os scripts foram desenhados para funcionar com o ZimaOS via SFTP na porta personalizada (ex: 2993). Certifica-te de que a chave SSH do servidor estÃ¡ autorizada no ZimaOS para um fluxo 100% automatizado.


ğŸ“„ LicenÃ§a
DistribuÃ­do sob a licenÃ§a MIT. Veja LICENSE para mais informaÃ§Ãµes.

Desenvolvido por Luciano Milani
